{
  "name": "Circuit Breaker State Machine",
  "description": "State machine for circuit breaker pattern",
  "initialState": "closed",
  "states": [
    {"name": "closed", "description": "Circuit is closed, requests allowed", "type": "initial"},
    {"name": "open", "description": "Circuit is open, requests rejected", "type": "intermediate"},
    {"name": "half_open", "description": "Circuit testing if service recovered", "type": "intermediate"}
  ],
  "transitions": [
    {"from": "closed", "to": "closed", "event": "CALL_SUCCESS", "guard": null, "action": "resetFailureCount"},
    {"from": "closed", "to": "closed", "event": "CALL_FAILURE", "guard": "!thresholdReached", "action": "incrementFailures"},
    {"from": "closed", "to": "open", "event": "CALL_FAILURE", "guard": "thresholdReached", "action": "openCircuit"},
    {"from": "open", "to": "open", "event": "CALL_ATTEMPT", "guard": "timeoutNotElapsed", "action": "rejectCall"},
    {"from": "open", "to": "half_open", "event": "TIMEOUT_ELAPSED", "guard": null, "action": "allowTestCall"},
    {"from": "half_open", "to": "half_open", "event": "CALL_SUCCESS", "guard": "!successThresholdReached", "action": "incrementSuccesses"},
    {"from": "half_open", "to": "closed", "event": "CALL_SUCCESS", "guard": "successThresholdReached", "action": "closeCircuit"},
    {"from": "half_open", "to": "open", "event": "CALL_FAILURE", "guard": null, "action": "reopenCircuit"}
  ],
  "errorStates": [],
  "recoveryTransitions": [
    {"from": "open", "to": "closed", "event": "MANUAL_CLOSE", "guard": null, "action": "forceClose"},
    {"from": "half_open", "to": "closed", "event": "MANUAL_CLOSE", "guard": null, "action": "forceClose"},
    {"from": "closed", "to": "open", "event": "MANUAL_OPEN", "guard": null, "action": "forceOpen"}
  ]
}
