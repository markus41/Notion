%% C4 Component Diagram - React Frontend Components
%% Shows the internal architecture of the React web application
%% Establishes scalable frontend structure for enterprise teams
%% Version: 1.0
%% Last Updated: 2025-10-14

graph TB
    subgraph "React Web Application (Vite + TypeScript)"
        subgraph "Pages & Routing"
            app_router["App Router<br/>---<br/>React Router v6<br/>navigation"]
            design_page["DesignPage<br/>---<br/>Workflow designer<br/>and canvas"]
            traces_page["TracesPage<br/>---<br/>Execution traces<br/>and debugging"]
            agents_page["AgentsPage<br/>---<br/>Agent management<br/>and configuration"]
            assets_page["AssetsPage<br/>---<br/>Resource management<br/>and storage"]
            settings_page["SettingsPage<br/>---<br/>System configuration<br/>and preferences"]
        end

        subgraph "State Management"
            zustand_store["Zustand Store<br/>---<br/>Global state<br/>management"]
            workflow_store["WorkflowStore<br/>---<br/>Workflow state<br/>and operations"]
            agent_store["AgentStore<br/>---<br/>Agent registry<br/>and status"]
            auth_store["AuthStore<br/>---<br/>Authentication<br/>and user context"]
        end

        subgraph "Data Fetching"
            tanstack_query["TanStack Query<br/>---<br/>Data fetching<br/>and caching"]
            api_client["APIClient<br/>---<br/>Axios HTTP<br/>client wrapper"]
            graphql_client["GraphQLClient<br/>---<br/>GraphQL operations<br/>(future)"]
        end

        subgraph "Real-time Communication"
            signalr_client["SignalRClient<br/>---<br/>WebSocket connection<br/>management"]
            event_handlers["EventHandlers<br/>---<br/>Real-time event<br/>processing"]
            notification_manager["NotificationManager<br/>---<br/>Toast and alert<br/>management"]
        end

        subgraph "UI Components"
            design_system["Design System<br/>---<br/>Reusable UI<br/>components"]
            workflow_canvas["WorkflowCanvas<br/>---<br/>React Flow<br/>diagram editor"]
            code_editor["CodeEditor<br/>---<br/>Monaco Editor<br/>integration"]
            data_grid["DataGrid<br/>---<br/>AG-Grid tables<br/>and lists"]
            charts["Charts<br/>---<br/>Recharts data<br/>visualization"]
        end

        subgraph "Shared Features"
            auth_provider["AuthProvider<br/>---<br/>MSAL authentication<br/>with Azure AD"]
            theme_provider["ThemeProvider<br/>---<br/>Dark/light mode<br/>and theming"]
            i18n_provider["i18nProvider<br/>---<br/>Internationalization<br/>support"]
            error_boundary["ErrorBoundary<br/>---<br/>Error handling<br/>and recovery"]
        end

        subgraph "Utilities"
            form_validation["FormValidation<br/>---<br/>Zod schema<br/>validation"]
            date_utils["DateUtils<br/>---<br/>date-fns helpers<br/>and formatting"]
            file_utils["FileUtils<br/>---<br/>File upload<br/>and processing"]
            export_utils["ExportUtils<br/>---<br/>PDF/CSV export<br/>capabilities"]
        end

        subgraph "Performance"
            lazy_loading["LazyLoading<br/>---<br/>Code splitting<br/>and lazy imports"]
            memo_hooks["MemoHooks<br/>---<br/>useMemo and<br/>useCallback optimization"]
            virtual_scroll["VirtualScroll<br/>---<br/>Large list<br/>virtualization"]
        end
    end

    %% Internal connections
    app_router --> design_page
    app_router --> traces_page
    app_router --> agents_page
    app_router --> assets_page
    app_router --> settings_page

    design_page --> workflow_store
    traces_page --> tanstack_query
    agents_page --> agent_store
    assets_page --> api_client
    settings_page --> auth_store

    workflow_store --> zustand_store
    agent_store --> zustand_store
    auth_store --> zustand_store

    tanstack_query --> api_client
    api_client --> auth_provider

    design_page --> signalr_client
    signalr_client --> event_handlers
    event_handlers --> notification_manager

    design_page --> workflow_canvas
    agents_page --> code_editor
    traces_page --> data_grid
    assets_page --> charts

    app_router --> auth_provider
    app_router --> theme_provider
    app_router --> i18n_provider
    app_router --> error_boundary

    design_page --> form_validation
    traces_page --> date_utils
    assets_page --> file_utils
    settings_page --> export_utils

    design_page --> lazy_loading
    workflow_canvas --> memo_hooks
    data_grid --> virtual_scroll

    %% Apply semantic color coding
    classDef page fill:#61dafb,stroke:#4fa8c5,color:#000,stroke-width:3px
    classDef state fill:#3eaf7c,stroke:#2d8659,color:#fff,stroke-width:2px
    classDef data fill:#512bd4,stroke:#3a1f9d,color:#fff,stroke-width:2px
    classDef realtime fill:#ec4899,stroke:#db2777,color:#fff,stroke-width:2px
    classDef ui fill:#f59e0b,stroke:#d97706,color:#000,stroke-width:2px
    classDef shared fill:#8b5cf6,stroke:#7c3aed,color:#fff,stroke-width:2px
    classDef utility fill:#94a3b8,stroke:#64748b,color:#fff,stroke-width:2px
    classDef performance fill:#10b981,stroke:#059669,color:#fff,stroke-width:2px

    class app_router,design_page,traces_page,agents_page,assets_page,settings_page page
    class zustand_store,workflow_store,agent_store,auth_store state
    class tanstack_query,api_client,graphql_client data
    class signalr_client,event_handlers,notification_manager realtime
    class design_system,workflow_canvas,code_editor,data_grid,charts ui
    class auth_provider,theme_provider,i18n_provider,error_boundary shared
    class form_validation,date_utils,file_utils,export_utils utility
    class lazy_loading,memo_hooks,virtual_scroll performance